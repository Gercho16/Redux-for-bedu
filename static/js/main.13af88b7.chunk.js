(this.webpackJsonpblog_platzi=this.webpackJsonpblog_platzi||[]).push([[0],{43:function(e,a,r){e.exports=r(74)},48:function(e,a,r){},49:function(e,a,r){},73:function(e,a,r){},74:function(e,a,r){"use strict";r.r(a);var t={};r.r(t),r.d(t,"traerTodos",(function(){return x}));var n={};r.r(n),r.d(n,"traerTodas",(function(){return Q})),r.d(n,"cambioUsuarioId",(function(){return S})),r.d(n,"cambioTitulo",(function(){return V})),r.d(n,"agregar",(function(){return W})),r.d(n,"editar",(function(){return X})),r.d(n,"cambioCheck",(function(){return Y})),r.d(n,"eliminar",(function(){return Z})),r.d(n,"limpiarForma",(function(){return $}));var o=r(0),c=r.n(o),u=r(23),s=r.n(u),i=(r(48),r(49),r(10)),l=r(19);var p=function(e){return c.a.createElement("nav",{id:"menu"},c.a.createElement(i.b,{to:"/"},"Usuarios"),c.a.createElement(i.b,{to:"/tareas"},"Tareas"))},d=r(14),m=r(15),b=r(17),f=r(16),h=r(18),y=r(4),v=r(3),g=r.n(v),E=r(11),j=r.n(E),_="usuarios_traer_todos",O="usuarios_cargando",k="usuarios_error",x=function(){return function(e){var a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e({type:O}),r.prev=1,r.next=4,g.a.awrap(j.a.get("https://jsonplaceholder.typicode.com/users"));case 4:a=r.sent,e({type:_,payload:a.data,error:""}),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("error:",r.t0.message),e({type:k,payload:"Informacion de usuarios no disponible"});case 12:case"end":return r.stop()}}),null,null,[[1,8]])}};r(73);var w=function(e){return c.a.createElement("div",{className:"center"},c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)))};var C=function(e){return console.log(e),c.a.createElement("h2",{className:"center rojo"},e.mensaje)};var R=Object(y.b)((function(e){return e.usuariosReducer}))((function(e){return c.a.createElement("div",null,c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Nombre"),c.a.createElement("th",null,"Correo"),c.a.createElement("th",null,"Enlace"))),c.a.createElement("tbody",null,e.usuarios.map((function(e,a){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.email),c.a.createElement("td",null,e.website),c.a.createElement("td",null,c.a.createElement(i.b,{to:"/publicaciones/".concat(a)},c.a.createElement("div",{className:"eye-solid icon"}))))})))))})),T=function(e){function a(){var e,r;Object(d.a)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=Object(b.a)(this,(e=Object(f.a)(a)).call.apply(e,[this].concat(n)))).ponerContenido=function(){return r.props.cargando?c.a.createElement(w,null):r.props.error?c.a.createElement(C,{mensaje:r.props.error}):c.a.createElement(R,null)},r}return Object(h.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.usuarios.length||this.props.traerTodos()}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h1",{className:"center"},"Usuarios"),this.ponerContenido())}}]),a}(c.a.Component),I=Object(y.b)((function(e){return e.usuariosReducer}),t)(T);var U=Object(y.b)((function(e){return e.publicacionesReducer}))((function(e){return c.a.createElement("ul",null,e.com_error?c.a.createElement(C,{mensaje:e.com_error}):e.com_cargando&&!e.comentarios.length?c.a.createElement(w,null):e.comentarios.map((function(e){return c.a.createElement("li",null,c.a.createElement("b",null,c.a.createElement("u",null,e.email)),c.a.createElement("br",null),e.body)})))})),N=r(21),z=r(1),A="publicaciones_actualizar",P=x,D=function(e){return function(a,r){var t,n,o,c,u,s,i,l;return g.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return a({type:"publicaciones_cargando"}),t=r().usuariosReducer.usuarios,n=r().publicacionesReducer.publicaciones,o=t[e].id,p.prev=4,p.next=7,g.a.awrap(j.a.get("https://jsonplaceholder.typicode.com/posts?userId=".concat(o)));case 7:c=p.sent,u=c.data.map((function(e){return Object(z.a)({},e,{comentarios:[],abierto:!1})})),s=[].concat(Object(N.a)(n),[u]),a({type:A,payload:s}),i=s.length-1,(l=Object(N.a)(t))[e]=Object(z.a)({},t[e],{publicaciones_key:i}),a({type:"usuarios_traer_todos",payload:l}),p.next=21;break;case 17:p.prev=17,p.t0=p.catch(4),console.log(p.t0),a({type:"publicaciones_error",payload:"Publicaciones no disponibles"});case 21:case"end":return p.stop()}}),null,null,[[4,17]])}},M=function(e,a){return function(r,t){var n=t().publicacionesReducer.publicaciones,o=n[e][a],c=Object(z.a)({},o,{abierto:!o.abierto}),u=Object(N.a)(n);u[e]=Object(N.a)(n[e]),u[e][a]=c,r({type:A,payload:u})}},F=function(e,a){return function(r,t){var n,o,c,u,s;return g.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r({type:"comentarios_cargando"}),n=t().publicacionesReducer.publicaciones,o=n[e][a],i.prev=3,i.next=6,g.a.awrap(j.a.get("https://jsonplaceholder.typicode.com/comments?postId=".concat(o.id)));case 6:c=i.sent,u=Object(z.a)({},o,{comentarios:c.data}),(s=Object(N.a)(n))[e]=Object(N.a)(n[e]),s[e][a]=u,r({type:"comentarios_actualizar",payload:s}),i.next=18;break;case 14:i.prev=14,i.t0=i.catch(3),console.log(i.t0.message),r({type:"comentarios_error",payload:"Comtenarios no disponibles"});case 18:case"end":return i.stop()}}),null,null,[[3,14]])}},G=function(e){function a(){var e,r;Object(d.a)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=Object(b.a)(this,(e=Object(f.a)(a)).call.apply(e,[this].concat(n)))).ponerUsuario=function(){var e=r.props,a=e.usuariosReducer,t=e.match.params.key;if(a.error)return c.a.createElement(C,{mensaje:a.error});if(!a.usuarios.length||a.cargando)return c.a.createElement(w,null);var n=a.usuarios[t].name;return c.a.createElement("h1",{className:"center"},"Publicaciones de ",n)},r.ponerPublicaciones=function(){var e=r.props,a=e.usuariosReducer,t=e.usuariosReducer.usuarios,n=e.publicacionesReducer,o=e.publicacionesReducer.publicaciones,u=e.match.params.key;if(t.length&&!a.error){if(n.cargando)return c.a.createElement(w,null);if(n.error)return c.a.createElement(C,{mensaje:n.error});if(o.length&&"publicaciones_key"in t[u]){var s=t[u].publicaciones_key;return r.mostrarInfo(o[s],s)}}},r.mostrarInfo=function(e,a){return e.map((function(e,t){return c.a.createElement("div",{className:"pub_titulo",key:e.id,onClick:function(){return r.mostrarComentarios(a,t,e.comentarios)}},c.a.createElement("h2",null,e.title),c.a.createElement("h3",null,e.body),e.abierto?c.a.createElement(U,{comentarios:e.comentarios}):"")}))},r.mostrarComentarios=function(e,a,t){r.props.abrirCerrar(e,a),t.length||r.props.traerComentarios(e,a)},r}return Object(h.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e,a,r;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,a=e.usuariosTraerTodos,e.publicacionesTraerPorUsuario,r=e.match.params.key,this.props.usuariosReducer.usuarios.length){t.next=4;break}return t.next=4,g.a.awrap(a());case 4:if(!this.props.usuariosReducer.error){t.next=6;break}return t.abrupt("return");case 6:"publicaciones_key"in this.props.usuariosReducer.usuarios[r]||this.props.publicacionesTraerPorUsuario(r);case 7:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return console.log(this.props),c.a.createElement("div",null,this.ponerUsuario(),this.ponerPublicaciones())}}]),a}(c.a.Component),J={usuariosTraerTodos:P,publicacionesTraerPorUsuario:D,abrirCerrar:M,traerComentarios:F},B=Object(y.b)((function(e){return{usuariosReducer:e.usuariosReducer,publicacionesReducer:e.publicacionesReducer}}),J)(G),q=r(25),H="tareas_traer_todas",K="tareas_guardar",L="tareas_limpiar",Q=function(){return function(e){var a,r;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"tareas_cargando"}),t.prev=1,t.next=4,g.a.awrap(j.a.get("https://jsonplaceholder.typicode.com/todos"));case 4:a=t.sent,r=[],a.data.map((function(e){r[e.userId]=Object(z.a)({},r[e.userId],Object(q.a)({},e.id,Object(z.a)({},e)))})),e({type:H,payload:r,error:""}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e({type:"tareas_error",payload:"Informacion de tareas no disponible"});case 13:case"end":return t.stop()}}),null,null,[[1,10]])}},S=function(e){return function(a){a({type:"tareas_cambio_usuario_id",payload:e})}},V=function(e){return function(a){a({type:"tareas_cambio_titulo",payload:e})}},W=function(e){return function(a){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:"tareas_cargando"}),r.prev=1,r.next=4,g.a.awrap(j.a.post("https://jsonplaceholder.typicode.com/todos",e));case 4:r.sent,a({type:K}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),a({type:"tareas_error",payload:"Intente mas tarde"});case 11:case"end":return r.stop()}}),null,null,[[1,8]])}},X=function(e){return function(a){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:"tareas_cargando"}),r.prev=1,r.next=4,g.a.awrap(j.a.put("https://jsonplaceholder.typicode.com/todos/".concat(e.id),e));case 4:r.sent,a({type:K}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),a({type:"tareas_error",payload:"Intente mas tarde"});case 11:case"end":return r.stop()}}),null,null,[[1,8]])}},Y=function(e,a){return function(r,t){var n=t().tareasReducer.tareas,o=n[e][a],c=Object(z.a)({},n);c[e]=Object(z.a)({},n[e]),c[e][a]=Object(z.a)({},n[e][a],{completed:!o.completed}),r({type:"tareas_actualizar",payload:c})}},Z=function(e){return function(a){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:"tareas_cargando"}),r.prev=1,r.next=4,g.a.awrap(j.a.delete("https://jsonplaceholder.typicode.com/todos/".concat(e)));case 4:r.sent,a({type:H,payload:{}}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),a({type:"tareas_error",payload:"El servicio no esta disponible."});case 11:case"end":return r.stop()}}),null,null,[[1,8]])}},$=function(){return function(e){e({type:L})}},ee=function(e){function a(){var e,r;Object(d.a)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=Object(b.a)(this,(e=Object(f.a)(a)).call.apply(e,[this].concat(n)))).mostrarContenido=function(){var e=r.props,a=e.tareas,t=e.cargando,n=e.error;return t?c.a.createElement(w,null):n?c.a.createElement(C,{mensaje:n}):Object.keys(a).map((function(e){return c.a.createElement("div",{key:e},c.a.createElement("h2",null,"Usuario: ",e),c.a.createElement("div",{className:"contenedor_tareas"},r.ponerTareas(e)))}))},r.ponerTareas=function(e){var a=r.props,t=a.tareas,n=a.cambioCheck,o=a.eliminar,u=Object(z.a)({},t[e]);return Object.keys(u).map((function(a){return c.a.createElement("div",{key:a},c.a.createElement("input",{type:"checkbox",defaultChecked:u[a].completed,onChange:function(){return n(e,a)}}),u[a].title,c.a.createElement("button",{className:"m_left"},c.a.createElement(i.b,{to:"/tareas/guardar/".concat(e,"/").concat(a)},"Editar")),c.a.createElement("button",{className:"m_left",onClick:function(){return o(a)}},"Eliminar"))}))},r}return Object(h.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.tareas,r=e.cargando,t=e.traerTodas;Object.keys(a).length||r||t()}},{key:"componentDidUpdate",value:function(){Object.keys(this.props.tareas).length||this.props.traerTodas()}},{key:"render",value:function(){return console.log(this.props.tareas),c.a.createElement("div",null,c.a.createElement("button",null,c.a.createElement(i.b,{to:"/tareas/guardar"},"Agregar")),this.mostrarContenido())}}]),a}(c.a.Component),ae=Object(y.b)((function(e){return e.tareasReducer}),n)(ee),re=function(e){function a(){var e,r;Object(d.a)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=Object(b.a)(this,(e=Object(f.a)(a)).call.apply(e,[this].concat(n)))).cambioUsuarioId=function(e){r.props.cambioUsuarioId(e.target.value)},r.cambioTitulo=function(e){r.props.cambioTitulo(e.target.value)},r.guardar=function(){var e=r.props,a=e.titulo,t=e.agregar,n=e.match.params,o=n.usuario_id,c=n.tarea_id,u=e.tareas,s=e.editar,i={userId:o,titulo:a,completed:!1};if(o&&c){var l=u[r.props.usuario_id][c];s(Object(z.a)({},i,{completed:l.completed,id:l.id}))}else t(i)},r.deshabilitar=function(){var e=r.props,a=e.usuario_id,t=e.titulo;return!!e.cargando||(!a||!t)},r.mostrarAccion=function(){var e=r.props,a=e.error;return e.cargando?c.a.createElement(w,null):a?c.a.createElement(C,{mensaje:a}):void 0},r}return Object(h.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.match.params,r=a.usuario_id,t=a.tarea_id,n=e.tareas,o=e.cambioUsuarioId,c=e.cambioTitulo,u=e.limpiarForma;if(r&&t){var s=n[r][t];o(s.userId),c(s.title)}else u()}},{key:"render",value:function(){return c.a.createElement("div",null,this.props.regresar?c.a.createElement(l.a,{to:"/tareas"}):"",c.a.createElement("h1",null,"Guardar Tarea"),"Usuario id:",c.a.createElement("input",{type:"number",value:this.props.usuario_id,onChange:this.cambioUsuarioId}),c.a.createElement("br",null),c.a.createElement("br",null),"Titulo:",c.a.createElement("input",{type:"text",value:this.props.titulo,onChange:this.cambioTitulo}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{onClick:this.guardar,disabled:this.deshabilitar()},"Guardar"),this.mostrarAccion())}}]),a}(c.a.Component),te=Object(y.b)((function(e){return e.tareasReducer}),n)(re);var ne=function(){return c.a.createElement(i.a,null,c.a.createElement(p,null),c.a.createElement("div",{className:"margen"},c.a.createElement(l.b,{exact:!0,path:"/",component:I}),c.a.createElement(l.b,{exact:!0,path:"/tareas",component:ae}),c.a.createElement(l.b,{exact:!0,path:"/publicaciones/:key",component:B}),c.a.createElement(l.b,{exact:!0,path:"/tareas/guardar",component:te}),c.a.createElement(l.b,{exact:!0,path:"/tareas/guardar/:usuario_id/:tarea_id",component:te})))},oe=r(20),ce=r(42),ue={usuarios:[],cargando:!1,error:""},se={publicaciones:[],cargando:!1,error:"",com_cargando:!1,com_error:""},ie={tareas:{},cargando:!1,error:"",usuario_id:"",titulo:"",regresar:!1},le=Object(oe.c)({usuariosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case _:return Object(z.a)({},e,{usuarios:a.payload,cargando:!1});case O:return Object(z.a)({},e,{cargando:!0});case k:return Object(z.a)({},e,{error:a.payload,cargando:!1});default:return e}},publicacionesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case A:return Object(z.a)({},e,{publicaciones:a.payload,cargando:!1,error:""});case"publicaciones_cargando":return Object(z.a)({},e,{cargando:!0});case"publicaciones_error":return Object(z.a)({},e,{error:a.payload,cargando:!1});case"comentarios_actualizar":return Object(z.a)({},e,{publicaciones:a.payload,com_cargando:!1,com_error:""});case"comentarios_cargando":return Object(z.a)({},e,{com_cargando:!0});case"comentarios_error":return Object(z.a)({},e,{com_error:a.payload,com_cargando:!1});default:return e}},tareasReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case H:return Object(z.a)({},e,{tareas:a.payload,cargando:!1,error:"",regresar:!1});case"tareas_cargando":return Object(z.a)({},e,{cargando:!0});case"tareas_error":return Object(z.a)({},e,{error:a.payload,cargando:!1});case"tareas_cambio_usuario_id":return Object(z.a)({},e,{usuario_id:a.payload});case"tareas_cambio_titulo":return Object(z.a)({},e,{titulo:a.payload});case K:return Object(z.a)({},e,{tareas:{},cargando:!1,error:"",regresar:!0,usuario_id:"",titulo:""});case"tareas_actualizar":return Object(z.a)({},e,{tareas:a.payload});case L:return Object(z.a)({},e,{usuario_id:"",titulo:""});default:return e}}}),pe=Object(oe.d)(le,{},Object(oe.a)(ce.a));s.a.render(c.a.createElement(y.a,{store:pe},c.a.createElement(ne,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.13af88b7.chunk.js.map